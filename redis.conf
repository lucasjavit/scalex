# Redis Configuration for Scalex
# Based on Redis 7.x

# Bind to all interfaces (permite conexões externas)
bind 0.0.0.0

# Porta padrão
port 6379

# Senha de autenticação (MUDE ESTA SENHA EM PRODUÇÃO!)
requirepass redis-password-scalex-2025

# Persistência de dados
# Salva o banco de dados em disco a cada 60 segundos se houver pelo menos 1 alteração
save 60 1
save 300 10
save 900 100

# Habilita append-only file (AOF) para durabilidade adicional
appendonly yes
appendfilename "appendonly.aof"
appendfsync everysec

# Limite de memória (ajuste conforme necessário)
# maxmemory 256mb
# maxmemory-policy allkeys-lru

# Log level
loglevel notice

# Database
databases 16

# Timeout de conexões inativas (0 = desabilitado)
timeout 300

# TCP keepalive
tcp-keepalive 300

# Diretório de dados
dir /data

# Desabilita comandos perigosos em produção
rename-command FLUSHDB ""
rename-command FLUSHALL ""
rename-command CONFIG ""

# Habilita snapshots em background
stop-writes-on-bgsave-error yes
rdbcompression yes
rdbchecksum yes
dbfilename dump.rdb
